function menu(){$(window).scroll(function(){var e=$(".trigger-header").offset().top-112;$(document).scrollTop()<e?$(".header").removeClass("alt"):$(".header").addClass("alt")})}function hamburger(){$(".hamburger").click(function(){$(".hamburger, .mobile-menu").toggleClass("active")}),$(".anchor").click(function(){$(".hamburger, .mobile-menu").toggleClass("active")})}function carousel(){$(".owl-carousel").owlCarousel({autoplay:!0,autoplaySpeed:1e3,autoplayTimeout:9e3,items:1,onChanged:callback,rewind:!0})}function heroCopy(){var e=$(".hero-text .active").innerHeight();$(".hero-text").css("height",e)}function callback(e){switch(e.item.index){case 0:$(".hero-copy").removeClass("active"),$(".copy-1").addClass("active");break;case 1:$(".hero-copy").removeClass("active"),$(".copy-2").addClass("active");break;case 2:$(".hero-copy").removeClass("active"),$(".copy-3").addClass("active");break;case 3:$(".hero-copy").removeClass("active"),$(".copy-4").addClass("active")}heroCopy()}function openPopup(e){$.ajax({url:"portfolio/"+e+".html",dataType:"html"}).then(function(e){$(".popup").html(e)}),$(".popup").show(),$("body").css({height:"100vh",overflow:"hidden"})}function closePopup(e){$(".popup").hide().empty(),$(".popup-video").each(function(){$(this)[0].load()}),$("body").css({height:"auto",overflow:"visible"})}function blog(){$("body").hasClass("main")?mainPosts():$("body").hasClass("news")?blogPosts():$("body").hasClass("article")&&postPosts()}function mainPosts(){$.ajax({url:"https://public-api.wordpress.com/wp/v2/sites/tribedigitalagency.wordpress.com/posts?per_page=3&orderby=date",dataType:"json"}).then(function(e){showPosts(e)})}function blogPosts(){$.ajax({url:"https://public-api.wordpress.com/wp/v2/sites/tribedigitalagency.wordpress.com/posts?per_page=100&orderby=date",dataType:"json"}).then(function(e){howMany(e)})}function postPosts(){var e=getUrlParameter("id");$.ajax({url:"https://public-api.wordpress.com/wp/v2/sites/tribedigitalagency.wordpress.com/posts/"+e,dataType:"json"}).then(function(e){drawPost(e)}),$.ajax({url:"https://public-api.wordpress.com/wp/v2/sites/tribedigitalagency.wordpress.com/posts?per_page=3&orderby=date",dataType:"json"}).then(function(e){showPosts(e)})}function showPosts(e){for(var t=0;t<=e.length;t++){var a=e[t].featured_media_url,n=e[t].title.rendered,s=$(e[t].excerpt.rendered).text(),o=dateConverter(e[t].date),r=e[t].id,i='<div class="news-item"><div class="news-image news-image'+t+'"></div><div class="news-info"><a href="post.html?id='+r+'"><h4 class="news-title">'+n+'</h4></a><p class="news-excerpt">'+s+'</p><p class="news-date">'+o+'</p><a class="news-link" href="post.html?id='+r+'">Ver más</a></div></div>';$(".blog-news").append(i),$(".news-image"+t).css("background",'url("'+a+'") center/cover no-repeat')}}function howMany(e){var t,a,n=e.length,s=n,o=1;n<=6?(a=n,t=n,$(".blog-more").hide()):(a=6,s=n-(t=6)),$(".blog-more").on("click",function(){s>=7?(s=n-(t+=a=6),drawBlog(e,o+=a,a)):(o+=a,s=n-(t+=a=s),drawBlog(e,o,a),0==s&&$(".blog-more").fadeOut())}),drawBlog(e,o,a)}function drawBlog(e,t,a){for(var n=t-1;n<=t+(a-2);n++){var s=e[n].featured_media_url,o=e[n].title.rendered,r=$(e[n].excerpt.rendered).text(),i=dateConverter(e[n].date),c=e[n].id,u='<div class="news-item"><div class="news-image news-image'+n+'"></div><div class="news-info"><a href="post.html?id='+c+'"><h4 class="news-title">'+o+'</h4></a><p class="news-excerpt">'+r+'</p><p class="news-date">'+i+'</p><a class="news-link" href="post.html?id='+c+'">Ver más</a></div></div>';$(".blog-news").append(u),$(".news-image"+n).css("background",'url("'+s+'") center/cover no-repeat')}}function drawPost(e){var t=e.featured_media_url,a=e.title.rendered,n=dateConverter(e.date),s=e.content.rendered;$(".post-head").css("background-image",'url("'+t+'")'),$(".post-title").html(a),$(".post-date").html(n),$(".post-content").html(s),postLayout()}function dateConverter(e){var t=e.split("T")[0].split("-");return t[2]+" de "+["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][parseInt(t[1])-1]+" de "+t[0]}function getUrlParameter(e){var t,a,n=decodeURIComponent(window.location.search.substring(1)).split("&");for(a=0;a<n.length;a++)if((t=n[a].split("="))[0]===e)return void 0===t[1]||t[1]}function postLayout(){var e=$(".post-content p img"),t=$('.post-content span[class^="embed"]');$(e).each(function(){$(this).prev().is("img")||$(this).next().is("img")||$(this).css({display:"block",flex:"0 1 100%"})}),$(t).parent().is("p")&&$(t).parent().css("display","inline-block"),$(e).parent().is("p")&&$(e).parent().css("display","flex")}function mailer(){var e=$("#contact-form"),t=$(".alert");$(".contact-submit").click(function(){$(e).addClass("submitted")}),$(e).submit(function(a){a.preventDefault();var n=$(e).serialize();$.ajax({type:"POST",url:$(e).attr("action"),data:n}).done(function(a){$(t).removeClass("error"),$(t).addClass("success"),$(t).text(a),alertMessage(),$(e).removeClass("submitted"),$("#name").val(""),$("#company").val(""),$("#email").val(""),$("#message").val("")}).fail(function(e){$(t).removeClass("success"),$(t).addClass("error"),""!==e.responseText?($(t).text(e.responseText),alertMessage()):($(t).text("Lo sentimos, ha ocurrido un error."),alertMessage())})})}function alertMessage(){var e=$(".alert");$(e).slideToggle(600,"easeInOutCirc",function(){$(this).delay(5e3).slideToggle(600,"easeInOutCirc")})}function smoothScroll(){if($(".header").innerHeight()>78)e=78;else var e=$(".header").innerHeight();$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click(function(t){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash);(a=a.length?a:$("[name="+this.hash.slice(1)+"]")).length&&(t.preventDefault(),$("html, body").animate({scrollTop:a.offset().top-e},1e3,"easeInOutExpo",function(){var e=$(a);if(e.focus(),e.is(":focus"))return!1;e.attr("tabindex","-1"),e.focus()}))}})}$(document).ready(function(){menu(),hamburger(),carousel(),blog(),smoothScroll(),mailer()}),$.easing.jswing=$.easing.swing,$.extend($.easing,{def:"easeOutQuad",swing:function(e,t,a,n,s){return $.easing[$.easing.def](e,t,a,n,s)},easeInQuad:function(e,t,a,n,s){return n*(t/=s)*t+a},easeOutQuad:function(e,t,a,n,s){return-n*(t/=s)*(t-2)+a},easeInOutQuad:function(e,t,a,n,s){return(t/=s/2)<1?n/2*t*t+a:-n/2*(--t*(t-2)-1)+a},easeInCubic:function(e,t,a,n,s){return n*(t/=s)*t*t+a},easeOutCubic:function(e,t,a,n,s){return n*((t=t/s-1)*t*t+1)+a},easeInOutCubic:function(e,t,a,n,s){return(t/=s/2)<1?n/2*t*t*t+a:n/2*((t-=2)*t*t+2)+a},easeInQuart:function(e,t,a,n,s){return n*(t/=s)*t*t*t+a},easeOutQuart:function(e,t,a,n,s){return-n*((t=t/s-1)*t*t*t-1)+a},easeInOutQuart:function(e,t,a,n,s){return(t/=s/2)<1?n/2*t*t*t*t+a:-n/2*((t-=2)*t*t*t-2)+a},easeInQuint:function(e,t,a,n,s){return n*(t/=s)*t*t*t*t+a},easeOutQuint:function(e,t,a,n,s){return n*((t=t/s-1)*t*t*t*t+1)+a},easeInOutQuint:function(e,t,a,n,s){return(t/=s/2)<1?n/2*t*t*t*t*t+a:n/2*((t-=2)*t*t*t*t+2)+a},easeInSine:function(e,t,a,n,s){return-n*Math.cos(t/s*(Math.PI/2))+n+a},easeOutSine:function(e,t,a,n,s){return n*Math.sin(t/s*(Math.PI/2))+a},easeInOutSine:function(e,t,a,n,s){return-n/2*(Math.cos(Math.PI*t/s)-1)+a},easeInExpo:function(e,t,a,n,s){return 0==t?a:n*Math.pow(2,10*(t/s-1))+a},easeOutExpo:function(e,t,a,n,s){return t==s?a+n:n*(1-Math.pow(2,-10*t/s))+a},easeInOutExpo:function(e,t,a,n,s){return 0==t?a:t==s?a+n:(t/=s/2)<1?n/2*Math.pow(2,10*(t-1))+a:n/2*(2-Math.pow(2,-10*--t))+a},easeInCirc:function(e,t,a,n,s){return-n*(Math.sqrt(1-(t/=s)*t)-1)+a},easeOutCirc:function(e,t,a,n,s){return n*Math.sqrt(1-(t=t/s-1)*t)+a},easeInOutCirc:function(e,t,a,n,s){return(t/=s/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+a:n/2*(Math.sqrt(1-(t-=2)*t)+1)+a},easeInElastic:function(e,t,a,n,s){var o=1.70158,r=0,i=n;return 0==t?a:1==(t/=s)?a+n:(r||(r=.3*s),i<Math.abs(n)?(i=n,o=r/4):o=r/(2*Math.PI)*Math.asin(n/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*s-o)*(2*Math.PI)/r)+a)},easeOutElastic:function(e,t,a,n,s){var o=1.70158,r=0,i=n;return 0==t?a:1==(t/=s)?a+n:(r||(r=.3*s),i<Math.abs(n)?(i=n,o=r/4):o=r/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*s-o)*(2*Math.PI)/r)+n+a)},easeInOutElastic:function(e,t,a,n,s){var o=1.70158,r=0,i=n;return 0==t?a:2==(t/=s/2)?a+n:(r||(r=s*(.3*1.5)),i<Math.abs(n)?(i=n,o=r/4):o=r/(2*Math.PI)*Math.asin(n/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*s-o)*(2*Math.PI)/r)*-.5+a:i*Math.pow(2,-10*(t-=1))*Math.sin((t*s-o)*(2*Math.PI)/r)*.5+n+a)},easeInBack:function(e,t,a,n,s,o){return void 0==o&&(o=1.70158),n*(t/=s)*t*((o+1)*t-o)+a},easeOutBack:function(e,t,a,n,s,o){return void 0==o&&(o=1.70158),n*((t=t/s-1)*t*((o+1)*t+o)+1)+a},easeInOutBack:function(e,t,a,n,s,o){return void 0==o&&(o=1.70158),(t/=s/2)<1?n/2*(t*t*((1+(o*=1.525))*t-o))+a:n/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+a},easeInBounce:function(e,t,a,n,s){return n-$.easing.easeOutBounce(e,s-t,0,n,s)+a},easeOutBounce:function(e,t,a,n,s){return(t/=s)<1/2.75?n*(7.5625*t*t)+a:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+a:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+a:n*(7.5625*(t-=2.625/2.75)*t+.984375)+a},easeInOutBounce:function(e,t,a,n,s){return t<s/2?.5*$.easing.easeInBounce(e,2*t,0,n,s)+a:.5*$.easing.easeOutBounce(e,2*t-s,0,n,s)+.5*n+a}});